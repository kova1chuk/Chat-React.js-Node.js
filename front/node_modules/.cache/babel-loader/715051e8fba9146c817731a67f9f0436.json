{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexports.default = function (_ref) {\n  var xhr = _ref.xhr,\n      progress = _ref.progress,\n      resolve = _ref.resolve;\n  xhr.upload.addEventListener('progress', function (event) {\n    if (!progress) return false;\n    progress(Math.round(event.loaded / event.total * 100));\n  });\n  xhr.addEventListener('load', function () {\n    var response = void 0;\n\n    try {\n      response = JSON.parse(xhr.response);\n    } catch (e) {\n      response = xhr.response;\n    }\n\n    var headers = xhr.getAllResponseHeaders().trim().split(/[\\r\\n]+/).map(function (line) {\n      return line.split(': ');\n    }).reduce(function (acc, _ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          header = _ref3[0],\n          value = _ref3[1];\n\n      acc[header] = value;\n      return acc;\n    }, {});\n    resolve({\n      response: response,\n      error: xhr.status < 200 || xhr.status >= 300,\n      status: xhr.status,\n      headers: headers\n    });\n  });\n  xhr.addEventListener('error', function (error) {\n    resolve({\n      error: error,\n      status: xhr.status,\n      response: xhr.response\n    });\n  });\n  xhr.addEventListener('abort', function (aborted) {\n    resolve({\n      aborted: aborted\n    });\n  });\n};","map":{"version":3,"sources":["/home/oleksii/Documents/Programming/chat-reactj-nodejs/front/node_modules/@navjobs/upload/dist/request/register-listeners.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","default","_ref","xhr","progress","resolve","upload","addEventListener","event","Math","round","loaded","total","response","JSON","parse","e","headers","getAllResponseHeaders","trim","split","map","line","reduce","acc","_ref2","_ref3","header","error","status","aborted"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.default = function (_ref) {\n  var xhr = _ref.xhr,\n      progress = _ref.progress,\n      resolve = _ref.resolve;\n\n  xhr.upload.addEventListener('progress', function (event) {\n    if (!progress) return false;\n    progress(Math.round(event.loaded / event.total * 100));\n  });\n\n  xhr.addEventListener('load', function () {\n    var response = void 0;\n    try {\n      response = JSON.parse(xhr.response);\n    } catch (e) {\n      response = xhr.response;\n    }\n\n    var headers = xhr.getAllResponseHeaders().trim().split(/[\\r\\n]+/).map(function (line) {\n      return line.split(': ');\n    }).reduce(function (acc, _ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          header = _ref3[0],\n          value = _ref3[1];\n\n      acc[header] = value;\n      return acc;\n    }, {});\n\n    resolve({\n      response: response,\n      error: xhr.status < 200 || xhr.status >= 300,\n      status: xhr.status,\n      headers: headers\n    });\n  });\n\n  xhr.addEventListener('error', function (error) {\n    resolve({ error: error, status: xhr.status, response: xhr.response });\n  });\n\n  xhr.addEventListener('abort', function (aborted) {\n    resolve({ aborted: aborted });\n  });\n};"]},"metadata":{},"sourceType":"script"}